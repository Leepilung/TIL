# 운영체제 면접

# 프로세스(Process)란 ?

`프로세스(Process)`는 실행 중인 프로그램으로 디스크로부터 메모리에 적재되어 CPU의 할당을 받을 수 있는 것을 말한다.

동시에 운영체제로부터 주소 공간, 파일, 메모리 등을 할당받으며 이것들을 총칭하여 프로세스라고 한다.

# 프로세스의 생성과정에 대해 설명해보시오.

일반적인 프로세스의 생성 과정

1. PCB(Process Control Block)가 생성되며 OS가 실행한 프로그램의 코드를 읽어들여 프로세스에 할당된 메모리의 Text segment에 저장한다.

-   PCB란 ?
    프로세스 제어 블록(Process Control Block)의 약자로, CPU에 의해 실행 중인 특정한 프로세스를 관리할 필요가 있는 정보를 포함하는 운영 체제 커널의 자료 구조이다.

2. 초기화된 전역 변수 및 static 변수를 data segment에 할당한다.

3. HEAP과 Stack은 초기 메모리 주소만 초기화 된다.

4. PCB에 여러 정보가 기록되면 Ready Queue에서 CPU를 할당받기까지 대기한다.

요약 -> PCB를 생성하고 여기에 데이터와 변수등을 담아 정보를 기록, CPU 스케쥴러로부터 순서를 할당을 받아 해당 순서가 올때까지 대기하고 순서가 올 경우 동작합니다.
## Heap과 Stack의 차이점은 무엇인가?

`Heap`은 메모리 주소가 낮은 영역부터 채워지고 `Stack`은 메모리 주소가 높은 영역부터 채워진다.

1. Heap : 동적 할당을 할 경우에는 Heap 영역에 할당된다.
2. Stack : 함수를 호출할 때 함수내부의 지역변수를 저정하거나 함수를 호출한 caller의 환경 정보를 저장한다.

# 스케쥴러

프로세스를 스케쥴링 하기 위해 세 가지의 Queue가 존재한다.

1. Job Queue : 현재 시스템 내에 있는 모든 프로세스의 집합
2. Ready Queue : 현재 메모리 내에 있으면서 CPU를 잡아서 실행되기를 기다리는 프로세스의 집합
3. Device Queue : Device I/O 작업을 대기하고 있는 프로세스의 집합


# 프로세스와 쓰레드의 차이점은?

`프로세스`는 실행되는 프로그램 자체와 프로그램이 실행되는 주변 환경까지 포함하는 개념이다.

조금 더 자세히 설명하자면 운영체제로부터 주소 공간, 파일, 메모리 등을 할당받으며 이것들을 총칭하여 프로세스라고 부른다.

-   실행되는 주변 환경이란?

    `실행되는 주변 환경`이란 사용중인 파일, 데이터, 메모리 영역 주소 공간등을 뜻한다.

`쓰레드`는 프로세스 내부에서 프로세스의 자원을 공유하거나 공유하지 않고 실행되는 `작업의 단위`를 말한다.

# 크롭 탭은 프로세스인가 쓰레드인가?

크롬 탭은 하나하나가 Process이다. 탭마다 PID를 갖고있으며 각 탭이 랜더링 정보나 기타 데이터를 관리함.

# 스레드(Thread)란 ?

스레드는 `프로세스의 실행 단위`라고 할 수 있다. 한 프로세스 내에서 동작되는 여러 `실행 흐름`으로 프로세스 내의 주소 공간이나 자원을 공유할 수 있다.

스레드는 스레드 ID, 프로그램 카운터, 레지스터 집합, 스택등으로 구성된다. 같은 프로세스에 속한 다른 스레드와 코드, 데이터 섹션, 열린 파일이나 신호와 같은 운영체제의 자원들을 공유한다.

-   스택을 스레드마다 독립적으로 할당하는 이유 ?

스택은 함수 호출 시 전달되는 인자, 되돌아갈 주소값 및 함수 내에서 선언하는 변수 등을 저장하기 위해 사용되는 메모리 공간이므로 스택 메모리 공간이 독립적이라는 것은 독립적인 함수 호출이 가능하다는 것이고 이는 독립적인 실행 흐름이 추가되는 것이다.

-   PC Register 를 스레드마다 독립적으로 할당하는 이유?

PC 값은 스레드가 명령어의 어디까지 수행하였는지를 나타나게 된다. 스레드는 CPU 를 할당받았다가 스케줄러에 의해 다시 선점당한다. 그렇기 때문에 명령어가 연속적으로 수행되지 못하고 어느 부분까지 수행했는지 기억할 필요가 있다. 따라서 PC 레지스터를 독립적으로 할당한다.

# 멀티 쓰레딩이란 ?

하나의 프로세스를 `다수의 실행 단위로 구분`하여 자원을 공유하고 자원의 생성과 관리의 중복성을 최소화하여 수행 능력을 향상 시키는 것.

-   장점

프로세스를 이용하여 동시에 처리하던 일을 스레드로 구현하면 메모리 공간과 시스템 자원 소모가 줄어든다.

-   문제점

멀티 프로세스 기반의 경우에는 공유 자원이 없기 때문에 공유 자원에 동시 접근 가능성이 없었지만 스레드의 경우 공유 자원을 기반으로 활용하기 때문에 동시 접근 가능성이 있기 때문에 주의해야 한다. 

그렇기 때문에 `동기화 작업`이 필요하다. 동기화를 통해 작업 처리 순서를 컨트롤 하고 공유 자원에 대한 접근을 컨트롤할 필요가 있다.

# 멀티 스레드 vs 멀티 프로세스

`멀티 스레드`는 멀티 프로세스보다 적은 메모리 공간을 차지하고 문맥 전환이 빠르다는 장점이 있지만, 하나의 스레드가 오류를 발생시키면 전체 스레드에 영향을 미치는 문제가 있다.

반면 `멀티 프로세스`는 프로세스가 죽더라도 다른 프로세스에 영향을 끼치지 않는 독립적으로 수행되는 장점이 있지만, 멀티 스레드보다 더 많은 메모리 공간과 CPU 시간을 차지하는 단점이 있다.

# 가상 메모리

다중 프로그래밍을 실현하기 위해서는 많은 프로세스들을 동시에 메모리에 올려두어야 한다. 가상메모리는 프로세스 전체가 메모리 내에 올라오지 않더라도 실행이 가능하도록 하는 기법 이며, 프로그램이 물리 메모리보다 커도 된다는 주요 장점이 있다.

가상 메모리를 사용함으로서 다음과 같은 장점이 발생한다.

1. 물리 메모리 크기에 제약을 받지 않게 된다.
2. 더 많은 프로그램을 동시에 실행할 수 있게 된다. 이로인해 응답시간은 유지되고, CPU 이용률과 처리율은 높아졌다.
3. swap

# 파일 시스템

컴퓨터 사용자의 응용프로그램을 실행함으로써 생성하는 정보를 파일이라는 단위로 저장&관리하는 운영체제의 서브시스템이며, 사용자와 보조기억장치 간의 인터페이스를 제공

## 파일 시스템의 기능

1. 사용자가 파일을 생성, 수정, 제거할 수 있도록 한다.
2. 여러 사용자가 파일을 공유하여 사용할 수 있다.
3. 불의의 사고에 대비한 백업, 복구 능력이 있다.
4. 주기억장치와 보조기억장치 간의 파일 전송을 담당
5. 어플리캐이션에 적합한 구조로 파일을 구성할 수 있도록 한다.


# 동기와 비동기의 차이

## 비유 

해야할 일(task)가 빨래, 설거지, 청소 세 가지가 있다고 가정한다. 이 일들을 동기적으로 처리한다면 순차적으로 빨래를 하고 설거지를 하고 청소를 한다.

반면 비동기적으로 일을 처리한다면 빨래하는 업체에게 빨래를, 설거지 대행 업체에 설거지를, 청소 대행 업체에 청소를 시킨다. 어느것이 먼저 완료될지는 모르나 일을 모두 마친 업체는 나에게 알려주기로 하였으니 그 기간동안 나는 다른 작업을 할 수 있는 것이다.

## Sync vs Async

일반적으로 동기와 비동기의 차이는 메소드를 실행시킴과 동시에 반환 값이 기대되는 경우를 `동기` 라고 표현하고 그렇지 않은 경우에 대해서는 `비동기`라고 표현한다.

동시라는 말은 실행되었을 때 값이 반환되기 전까지 blocking 되어 있다는 것을 의미한다.

비동기의 경우, blocking이 되지 않고 이벤트 큐에 넣거나 백그라운드 스레드에게 해당 task를 위임하고 다음 코드를 실행하기 때문에 값이 바로 반환되지 않는다.


## 비동기의 대표적 예시

자바스크립트의 Ajax가 비동기의 가장 기본적인 사례이다.

이외에도 콜백함수, Promise, Async등의 함수등이 있다.

프로젝트에서는 url에 입력을 보낼떄가 해당될 듯.

url 입력과 동시에 주소의 유효성을 체크하고 유효하다면 2가지의 비동기작업을 동시에 진행했다. 데이터의 분석 요청(비동기적 요청)과 로딩페이지로의 이동(그냥 동기적 실행에 해당) -> 이후에 데이터 분석이 성공하면 결과페이지 렌더(비동기 요청으 결과에 해당)


# 스택 오버플로우란?

메모리를 직접 건드릴 수 있는 언어에서 정해진 크기보다 더 큰 데이터를 메모리에 쓰면서 의도하지 않은메모리 영역에 에디터가 저장되는 것을 말한다.

이 때 사용중인 메모리 영역을 건드리면 에러가 발생할 수 있고 이를 악용하여 악성코드를 스택 오버 플로우로 심어 해킹을 시도할 수 도 있다.

# 경쟁 상태(Race Condition)란?

- 어떠한 공유 자원을 서로 다른 스레드나 프로세스가 동시에 접근하게 되는 상태를 의미한다.

- 둘 이상의 입력이나 조작이 동시에 일어나 의도하지 않은 결과를 가져오는 경우를 말하기도 한다.

이러한 가능성이 있는 부분을 임계 영역이라고 부르고 lock이나 mutex 등의 방법으로 공유 자원에 대한 접근을 제한시켜 해결할 수 있다.


# 컨텍스트 스위치란?

CPU에서 멀티 프로세싱을 처리하기 위해서는 시분할 방식을 사용하고 현재 처리중인 프로세스의 메타 정보를 PCB에 기록해놓고 다른 프로세스를 실행하도록 한다.

이후에 해당 프로세스가 time quantom(타임 퀀텅)을 받아 다시 처리하게 되었을 경우 이전에 처리하던 정보를 바탕으로 프로세스가 시작되어야할 위치를 찾아서 동작을 이어갈 수 있게 해야한다.

여기서 현재 처리중인 프로세스 정보를 PCB에 저장하고 다음에 실행해야할 프로세스 정보를 PCB에서 가져와 CPU에서 처리할 수 있도록 하는 과정을 `컨텍스트 스위치`라고 부른다.

* 타임 퀀텀 (Time quantum)이란?

프로세스에게 할당되는 최대 CPU 시간을 의미한다.
