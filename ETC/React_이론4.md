# React 이론 정리 4

# 🏷 SPA

SPA 는 싱글 페이지 애플리케이션(Single Page Application)의 약어로 한 개의 페이지로 이뤄진 애플리케이션을 의미합니다.

전통적인 웹 사이트는 지금보다 문서 하나에 전달되는 파일의 용량이 적었고 이로 인해 어떤 요소를 한번 클릭하면 완전히 새로운 페이지를 서버에서 전송해 주곤 했습니다.

그러나 현대에 이르러 웹 사이트가 고도화되면서 페이지 용량이 커짐에 따라 이러한 전송 방식은 점점 버거워지게 되었습니다.

이러한 문제를 해결하기 위해 웹 사이트의 전체 페이지를 하나의 페이지에 담아 동적으로 화면을 바꿔가며 표현하는 것입니다.

## 단점

앱의 규모가 커지면 자바스크립트 파일또한 너무 커진다.

    - 코드 스플리팅으로 트래픽, 로딩 속도 개선 가능

# 🏷 리덕스 미들웨어

리덕스 미들웨어는 액션을 디스패치했을 때 리듀서에서 이를 처리하기에 앞서 사전에 지정된 작업을 실행할 수 있게 해줍니다. 액션과 리듀서 사이의 중간자라고 볼 수 있습니다.

전달받은 액션을 단순히 콘솔에 기록하거나, 전달받은 액션 정보를 기반으로 액션을 아예 취소하거나, 다른 종류의 액션을 추가하는 등 다양한 역할을 담당할 수 있습니다.

결국 함수를 반환하는 함수를 반환하는 함수로 파라미터로 받아오는 store는 리덕스 스토어 인스턴스, action은 디스패치된 액션을 가리킵니다.

미들웨어에서 사용되는 새로운 파라미터는 `next` 인데, 이는 `함수형태`이며 store.disapatch 와 비슷한 역할을 합니다. 차이점은 next(action)을 통해 다음 처리해야 할 미들웨어에게 액션을 넘겨주고, 만약 그 다음 미들웨어가 없다면 리듀서에게 액션을 넘겨줍니다.

## 🤔 왜 필요한가?

기존의 리덕스는 액션이 발생하게 되면, 디스패치를 통해 스토어에게 상태 변화의 필요성을 알렸습니다.

하지만, 디스패치된 액션을 스토어로 전달하기 전에 처리하고 싶은 작업이 있을 수 있습니다. 예로 어떤 액션이 발생했는지 로그를 남기거나, 액션을 취소시키거나, 다른 액션을 발생시킬 수도 있습니다.

우리가 알고 있는 리덕스는 동기적인 흐름을 통해 동작합니다. 액션 객체가 생성되고, 디스패치가 액션 발생을 스토어에게 알리면, 리듀서는 정해진 로직에 의해 액션을 처리한 후 새로운 상태값을 반환하는 과정으로 처리됩니다.

그러나 시간을 딜레이 시킨다던지 외부 데이터를 요청하여 그에 따른 응답을 화면에 보여줘야 하는 작업들의 경우 리덕스에서 `비동기 작업`을 처리하기 위해 리덕스 미들웨어를 주로 사용합니다.

리덕스 미들웨어로 비동기 작업을 수행해야 하는 경우는 매우 다양한데, 예로 presentational component에 API로 요청한 정보를 출력해야 하는 액션이 발생할 경우, 처리하는 시간이 필요하기 때문에 이를 비동기 작업으로 수행하게 됩니다.

기존 리덕스의 일처리 흐름이

<img src="https://img1.daumcdn.net/thumb/R1280x0/?scode=mtistory2&fname=https%3A%2F%2Fblog.kakaocdn.net%2Fdn%2FcdZsmV%2FbtqEvhp4aVH%2FEZ1wkg9kqYLCoR4cqiDNUk%2Fimg.png">

다음과 같았다면

비동기 작업을 위해 미들웨어를 추가했을 때의 일처리 흐름은

<img src="https://img1.daumcdn.net/thumb/R1280x0/?scode=mtistory2&fname=https%3A%2F%2Fblog.kakaocdn.net%2Fdn%2FdEgIYa%2FbtqEw162GCB%2FsBA2iKDgzEq77M5P11XQf1%2Fimg.png">

이와 같게됩니다.

# 🏷 Redux-toolkit

[리덕스 toolkit 튜토리얼 1](https://velog.io/@mael1657/Redux-toolkit%EC%9C%BC%EB%A1%9C-%EC%83%81%ED%83%9C%EA%B4%80%EB%A6%AC%ED%95%98%EA%B8%B0)

redux의 동작 구조(별도의 라이브러리가 없을 때)

1. 액션타입 정의
2. 액션 함수 정의
3. 리듀서 정의

말했듯이 redux만으로는 너무 큰 보일러 플레이트가 발생하므로 redux-action을 사용하였고, 불변성을 유지하기 위해 immer를, 비동기를 수월하게 하기 위해 thunk나 saga를 사용하여 기존의 단점들을 보완하고자 하였습니다.

문제는 벌써 4개의 라이브러리를 설치해야 위의 기능을 사용할 수 있는데 reudx에서 공식적으로 만든 라이브러리인 redux-tookit이 saga를 제외한 기능을 모두 지원합니다.
