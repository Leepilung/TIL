# JavaScript 5

# Math

Math는 앞에서 본 다른 내장 전역 객체와는 다소 다르다. 함수가 아니므로 new를 사용해 객체를 생성하는데 사용할 수 없다. Math는 수학 연산의 여러 메소드와 속성을 제공하는 내장 전역 객체이다.

Math 객체의 속성들은 상수이므로 그 값을 변경할 수 없다. 이름은 모두 대문자로 돼있어 일반 속성과의 차이를 쉽게 구별할 수없다.(Number() 생성자의 상수 속성과 비슷하다)

> 상수 PI:

```js
Math.PI;
3.141592653589793;
```

> 2의 제곱근

```js
Math.SQRT2;
1.4142135623730951;
```

> 오일러 상수

```js
Math.E;
2.718281828459045;
```

> 2와 10의 자연로그

```js
Math.LN2;
0.6931471805599453;
Math.LN10;
2.302585092994046;
```

이 다음은 Math 객체가 제공하는 메소드를 살펴보자.

## 난수 생성

```js
Math.random();
0.22427714008852984;
Math.random();
0.13823068738590527;
Math.random();
0.11675484811883297;
```

`random()` 함수는 0과 1사이의 숫자를 반환한다. 따라서 만약 0과 100 사이의 숫자가 필요하다면 다음과 같이 코드를 짜면 된다.

```js
100 * Math.random();
83.78142766562566;
100 * Math.random();
25.80367596455715;
100 * Math.random();
88.3858729536897;
```

두 값 사이의 숫자는 공식 ((max-min) \* Math.random())+min을 사용한다.

예를 들어 2와 10사이의 난수는 다음 수식을 사용하면 된다.

```js
8 * Math.random() + 2;
5.024658437392145;
```

정수만 필요하다면 다음 반올림 메소드 중 하나를 사용 하면 된다.

- floor() : 내림
- cell() : 올림
- round() : 반올림

예를 들어 0또는 1을 얻으려면 다음과 같은 코드를 이용하면 된다.

```js
Math.round(Math.random());
1;
```

숫자 집합 중에서 가장 낮거나 높은 숫자가 필요한 경우 min()과 max() 메소드를 사용할 수 있다. 따라서 페이지에서 날짜의 월을 입력받는 폼이 있을때 다음과 같이 하면 유효한(1~12)를 입력받을 수 있다.

```js
Math.min(Math.max(1, input), 12);
```

또한 Math 객체는 연산자가 없는 수학 연산을 수행하는 기능도 제공한다.

pow()를 사용해 거듭 제곱을 구하거나, sqrt()로 제곱근을 구하거나, sin(), cos() atan()등의 삼각 연산등을 수행할 수 있다.

예로 2의 8제곱이나 9의 제곱근을 계산하자면 다음과 같이 사용하면 된다.

```js
Math.pow(2, 8);
256;

Math.sqrt(9);
3;
```

# Date

Date()는 날짜 객체를 생성하는 생성자 함수이다. 다음을 전달하여 새로운 객체를 생성할 수 있다.

- 아무것도 전달하지 않음(디폴트의 경우 오늘 날짜)
- 날짜 같은 문자열
- 일, 월, 시간 등이 구별된 값
- 타임스탬프

```js
new Date();
Date Wed Jul 21 2021 15:14:20 GMT+0900 (대한민국 표준시)
```

콘솔에서 Date 객체에서 호출된 toString() 메소드의 결과가 표시된다.

다음은 문자열을 사용해 Date 객체를 초기화하는 몇 가지 예제들이다.

```js
new Date('2015 11 12');
Date Thu Nov 12 2015 00:00:00 GMT+0900 (대한민국 표준시)

new Date('2022 1 1');
Date Sat Jan 01 2022 00:00:00 GMT+0900 (대한민국 표준시)

new Date('1 mar 2016 5:30');
Date Tue Mar 01 2016 05:30:00 GMT+0900 (대한민국 표준시)
```

Date 생성자는 다른 문자열에서 날짜를 알아낼 수 있지만, 사용자 입력을 생성자로 전달하는 것과 같이 정확한 입력 날짜를 정의하는 것은 신뢰할 수 있는 방법은 아니다.

더 좋은 방법은 Date() 생성자에 다음의 숫자값을 전달하는 것이다.

- 년
- 월 -0(1월)~ 11(12월)까지
- 일 - 1부터 31까지
- 시간 - 0부터 23까지
- 분 - 0부터 59까지
- 초 - 0부터 59까지
- 밀리초 - 0부터 999까지

몇 가지 예제를 살펴보자.

```js
new Date(2015, 0, 1, 17, 05, 03, 120);
Date Thu Jan 01 2015 17:05:03 GMT+0900 (대한민국 표준시)
```

월이 0부터 시작하기 때문에 1이 2월이라는 부분을 주의하자.

```js
new Date(2016, 1, 28);
Date Sun Feb 28 2016 00:00:00 GMT+0900 (대한민국 표준시)
```

허용된 값 보다 큰 값을 전달하면 날짜가 자동으로 다음날로 넘어간다. 예를 들어 2016년 2월 30일은 없으므로 3월 1일이 된다.(2016년은 윤년에 해당된다.)

```js
new Date(2016, 1, 29);
Date Mon Feb 29 2016 00:00:00 GMT+0900 (대한민국 표준시)

new Date(2016, 1, 30);
Date Tue Mar 01 2016 00:00:00 GMT+0900 (대한민국 표준시)
```

마찬가지로 12월 32일은 다음해 1월 1일로 자동으로 바뀐다.

```js
new Date(2020, 12, 31);
Date Sun Jan 31 2021 00:00:00 GMT+0900 (대한민국 표준시)

new Date(2020, 12, 32);
Date Mon Feb 01 2021 00:00:00 GMT+0900 (대한민국 표준시)
```

new를 사용하지 않고 Date()를 호출하면, 매개변수의 전달과 관계없이 현재 날짜를 나타내는 문자열이 표시된다. 다음 예제에서는 현재 시간을 보여준다.

```js
Date();
("Wed Jul 21 2021 15:21:36 GMT+0900 (대한민국 표준시)");

Date(1, 2, 3, "it dosen't matter");
("Wed Jul 21 2021 15:22:16 GMT+0900 (대한민국 표준시)");

typeof Date();
("string");
typeof new Date();
("object");
```

## date 객체를 사용하기위한 메소드

날짜 객체를 생성하면 해당 객체의 많은 메소드를 호출할 수 있다. 대부분의 메소드는 getMonth(), setMonth(), getHours(), setHours() 등과 같이 set*(), get*() 메소드로 나눌 수 있다.

```js
var d = new Date(2021, 1, 1);
d.toString();
("Mon Feb 01 2021 00:00:00 GMT+0900 (대한민국 표준시)");
```

월을 구하려면 다음 코드를 작성하면 된다.

```js
d.getMonth();
1;
```

Date 객체의 모든 메소드 외에도 Date() 함수/객체의 속성인 두 개의 메소드가 더 있다. 이들은 Math 객체 메소드처럼 동작한다. 클래스 기반 언어에서 이런 메소드는 인스턴스를 필요로 하지 않기 때문에 정적이라고 부른다.

Date.parse() 메소드는 문자열을 받아 타임스탬프를 반환한다.

```js
Date.parse("Jan 11, 2018");
1515596400000;
```

Date.UTC() 메소드는 년,월,일등의 모든 매개변수를 받아 표준시의 타임스탬프를 생성한다.

```js
Date.UTC(2018, 0, 11);
1515628800000;
```

new Date() 생성자가 타임스탬프를 허용하므로, Date.UTC()의 결과를 전달할 수 있다.
또한 다음 예제를 사용하면 new Date()가 로컬 시간에서 동작하는 방식과 UTC()가 표준시에서 동작하는 방식을 볼 수 있다.

```js
new Date(Date.UTC(2018,0,11));
Date Thu Jan 11 2018 09:00:00 GMT+0900 (대한민국 표준시)

new Date(2018,0,11);
Date Thu Jan 11 2018 00:00:00 GMT+0900 (대한민국 표준시)
```

Date 생성자에 ES5의 nodw() 메소드가 추가되었다. 이는 현재 타임스탬프를 반환한다.
Date 객체의 getTime() 메소드를 사용하는것과 같은 동작을 하는데 보다 편리한 방법이다.

```js
Date.now();
1627021903710;

Date.now() === new Date().getTime();
true;
```

날짜의 내부 표현을 정수 타임스탬프로 생각할 수 있으며, 다른 모든 메소드들은 이를 덮어 쓰고 있는것이라고 생각할 수 있다.

## 생일 계산

Date 객체로 작업하는 마지막 예제이다.

내 생일이 미래의 특정 년도에 무슨 요일인지 궁금하다.

```js
var d = new Date(2022, 6, 20);
d.getDay();
3;
```

요일은 0부터 카운트가 시작되니 3은 목요일이 될 것이다.

생일을 축하하기에 목요일은 애매한 날짜이다. 그렇다면 2022년부터 3022년까지 7월 20일이금요일인 횟수와 모든 요일의 분포를 알아보자.

먼저 일주일의 각각의 요일을 위해 7개의 요소를 가진 배열을 초기화해 보자. 이 요소는 카운터로 사용된다. 그다음 루프를 3022까지 증가시키며 카운트를 센다고 가정하자.

```js
var stats = [0, 0, 0, 0, 0, 0, 0];

for ( var i = 2022; i < 3022; i ++) {
  stats[new Date(i, 6, 20).getDay()]++;
}…
Array(7) [ 143, 145, 140, 145, 140, 145, 142 ]
```

금요일은 모두 140번이고 토요일은 145번이다. 쏘쏘한듯 ..?
